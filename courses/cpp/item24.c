/*****************************************************************************
 * File name:   item24.c
 * Developer:   Yaron Meister
 * Date:        2019-02-17 11:28:25
 *****************************************************************************/
 
#include <iostream>     /*    printf    */
#include <stdlib.h>    /* EXIT_SUCCESS */


/********************************* Macros *************************************/ 
 
 
/************************** Forward Declarations ******************************/
/* typedef struct test
{
	const int num;
	int foo;
}test_t; */

struct X
{
	explicit X(int);
	~X();
	void Foo();
	void Bar() const;

	int m_a;
	int *m_p;
};

X::X(int a_): m_a(a_), m_p(new int(a_)) 
{}

X::~X()
{
	delete m_p;
	m_p = 0;
}

void X::Foo() 
{
	++m_a;
	--(*m_p);
}

void X::Bar() const
{
	std::cout<<m_a<<std::endl;
	std::cout<<*m_p<<std::endl;
	std::cout<<m_p<<std::endl;
	//m_a = 0; //---1---
	//m_p = 0; //---2---
	//*m_p = 0; //---3---
}

void Fifi (const X& x_)
{
	//x_Foo(); //---4---
	x_.Bar();
}

/***************************** Global variables *******************************/


/*******************************************************************************
                                Main Function
*******************************************************************************/

int main(void)
{
	/* test_t test = {2, 3};
	test.foo = 6;
	printf("%d , %d\n", test.num, test.foo); */

	X x1(1);

	x1.Foo();
	Fifi(x1);
 
    return (EXIT_SUCCESS);
} 

/*******************************************************************************
                           Functions Implementations
*******************************************************************************/  
/******************************************************************************/ 


/*******************************************************************************
******************************** END OF FILE ***********************************
*******************************************************************************/ 
